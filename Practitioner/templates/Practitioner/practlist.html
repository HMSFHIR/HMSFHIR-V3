{% extends "autht/main.html" %}

{% block PageName %}Practitioners{% endblock PageName %}
{% block title %}Practitioners{% endblock%}

{% load static %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'Practitioner/practlist.css' %}">
<script src="{% static 'js/practlistsearch.js' %}" ></script>

<div class="page-header">
    <div>
        <h1 class="page-title">Practitioners</h1>
        <p class="page-subtitle">Manage hospital practitioners and their information</p>
    </div>
    {% if user.user_type != 'admin' %}
        <div></div>
    {% else %}
        <div class="operations">
            <a href="{% url 'NewPractitioner' %}" class="add-practitioner-btn">
                <i class="fas fa-plus"></i>
                Add Practitioner
            </a>
        </div>
    {% endif %}
</div>

<div class="filters-section">
    <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search practitioners..." id="searchInput">
    </div>
</div>

<div class="table-container">
    <div class="table-header">
        <div class="table-title">All Practitioners</div>
        <div class="table-count">{{ practitioners|length }} practitioner{{ practitioners|length|pluralize }}</div>
    </div>
    
    {% if practitioners %}
        <table class="practitioners-table">
            <thead>
                <tr>
                    <th>Practitioner</th>
                    <th>Role</th>
                    <th>Contact</th>
                    <th>Hospital</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for practitioner in practitioners %}
                    <tr>
                        <td>
                            <div class="practitioner-id">{{ practitioner.id }}</div>
                            <div class="practitioner-name">{{ practitioner.name }}</div>
                        </td>
                        <td>
                            <span class="role-badge role-{% if practitioner.role == 'Doctor' %}doctor{% elif practitioner.role == 'Nurse' %}nurse{% elif practitioner.role == 'Admin' %}admin{% else %}specialist{% endif %}">
                                {{ practitioner.role }}
                            </span>
                        </td>
                        <td>
                            <div class="contact-info">{{ practitioner.phone }}</div>
                            <div class="contact-info">{{ practitioner.email }}</div>
                        </td>
                        <td>{{ practitioner.hospital_affiliation }}</td>
                        <td>
                            <div class="action-buttons">
                                <a href="{% url 'EditPractitioner' practitioner.id %}" class="btn btn-edit">
                                    <i class="fas fa-edit"></i>
                                    Edit
                                </a>
                                <form method="post" action="{% url 'DeletePractitioner' practitioner.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-delete" onclick="return confirm('Delete practitioner {{ practitioner.name }}?')">
                                        <i class="fas fa-trash"></i>
                                        Delete
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="empty-state">
            <i class="fas fa-user-md"></i>
            <h3>No practitioners found</h3>
            <p>Get started by adding your first practitioner to the system.</p>
            <a href="{% url 'NewPractitioner' %}" class="add-practitioner-btn">
                <i class="fas fa-plus"></i>
                Add First Practitioner
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}